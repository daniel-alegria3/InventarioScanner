var p=Object.defineProperty;var h=(s,a,t)=>a in s?p(s,a,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[a]=t;var c=(s,a,t)=>(h(s,typeof a!="symbol"?a+"":a,t),t);import{d as w,k as f,c as m,w as n,u as o,l as E,o as y,a as e,I as l,b as g,e as I,f as u,g as _,h as b,i as q,j as v,_ as T}from"./index-L2APZlzK.js";import{T as C}from"./TablaUsuarios-dKfhathb.js";class R{constructor(a){c(this,"sqlite");c(this,"db");this.sqlite=a}async init(){const a=await this.sqlite.checkConnectionsConsistency(),t=(await this.sqlite.isConnection("db_inventario",!1)).result;a.result&&t?this.db=await this.sqlite.retrieveConnection("db_inventario",!1):this.db=await this.sqlite.createConnection("db_inventario",!1,"no-encryption",1,!1)}async obtener_productos(){await this.db.open();const a=await this.db.query("\n            SELECT id, nombre, precio, unidad_medida, categorias, foto, cod_barra\n            FROM producto;\n        ");return await this.db.close(),a.values}async obtener_productos_por_texto(a){await this.db.open();let t="%".concat(a,"%");const i=await this.db.query("\n            SELECT id, nombre, precio, unidad_medida, categorias, foto, cod_barra\n            FROM producto\n            WHERE nombre LIKE ? OR categorias LIKE ?;",[t,t]);return await this.db.close(),i.values}async obtener_producto_por_cod_barra(a){await this.db.open();const t=await this.db.query("\n            SELECT id, nombre, precio, unidad_medida, categorias, foto, cod_barra\n            FROM producto\n            WHERE cod_barra = ?;",[a]);return await this.db.close(),t.values}async añadir_producto(a){await this.db.open();const t=await this.db.run("\n            INSERT INTO producto (nombre, precio, unidad_medida, categorias, foto, cod_barra)\n            VALUES (?, ?, ?, ?, ?, ?);",this.producto_to_array(a));await this.check_run_response(t),await this.db.close()}async quitar_producto(a){await this.db.open();const t=await this.db.run("DELETE FROM producto WHERE id = ?",[a]);await this.check_run_response(t),await this.db.close()}async actualizar_producto(a,t){await this.db.open();const i=this.producto_to_array(t).concat([a]),r=await this.db.run("\n            UPDATE producto\n            SET nombre = ?, precio = ?, unidad_medida = ?, categorias = ?, foto = ?, cod_barra = ?\n            WHERE id = ?",i);await this.check_run_response(r),await this.db.close()}async check_run_response(a){if(a.changes&&a.changes.changes&&a.changes.changes<0)throw console.log("aww man"),new Error("Error: sqlite query failed")}producto_to_array(a){var t,i,r,d;return[a.nombre,a.precio,(t=a.unidad_medida)!=null?t:null,(i=a.categorias)!=null?i:null,(r=a.foto)!=null?r:null,(d=a.cod_barra)!=null?d:null]}}const k=w({__name:"FolderInventario",setup(s){let a=new R(E("$sqlite")),t;return f(async()=>{await a.init(),t=await a.obtener_productos_por_texto("nombre1"),t=await a.obtener_producto_por_cod_barra("12374"),await a.añadir_producto({nombre:"noooo",precio:666,unidad_medida:"woa",categorias:null,foto:null,cod_barra:null}),t=await a.obtener_productos(),console.log(t)}),(i,r)=>(y(),m(o(v),null,{default:n(()=>[e(o(b),{translucent:!0},{default:n(()=>[e(o(l),null,{default:n(()=>[e(o(g),{slot:"start"},{default:n(()=>[e(o(I),{color:"primary"})]),_:1}),e(o(u),null,{default:n(()=>r[0]||(r[0]=[_("Inventario")])),_:1})]),_:1})]),_:1}),e(o(q),{fullscreen:!0},{default:n(()=>[e(o(b),{collapse:"condense"},{default:n(()=>[e(o(l),null,{default:n(()=>[e(o(u),{size:"large"},{default:n(()=>r[1]||(r[1]=[_("Inventario")])),_:1})]),_:1})]),_:1}),e(C)]),_:1})]),_:1}))}}),F=T(k,[["__scopeId","data-v-1f0e28ef"]]);export{F as default};
